<div class="form-container">
  <div class="form-header">
    <h2>Add Staff</h2>
    <p>Create a new Staff profile with necessary details</p>
  </div>

  <!-- Profile Picture Preview -->
  <div class="profile-pic-preview" *ngIf="profilePreview; else placeholder">
    <img [src]="profilePreview" alt="Profile Preview" />
  </div>
  <ng-template #placeholder>
    <div class="profile-pic-placeholder">
      <i class="fas fa-user"></i>
    </div>
  </ng-template>

  <form  #staffForm="ngForm" (ngSubmit)="submitForm()" class="form-grid">

    <!-- Profile Picture Upload -->
    <div class="form-group full-width">
      <label>Profile Picture</label>
      <input type="file" accept="image/*" (change)="onProfilePicSelected($event)" />
      <div *ngIf="profileInvalid" class="error">Invalid image file selected</div>
    </div>

    <div class="form-group">
      <label>Email *</label>
      <input type="email" name="email" [(ngModel)]="staff.email" required />
    </div>

    <div class="form-group">
      <label>First Name *</label>
      <input type="text" name="firstName" [(ngModel)]="staff.firstName" required />
    </div>

    <div class="form-group">
      <label>Last Name *</label>
      <input type="text" name="lastName" [(ngModel)]="staff.lastName" required />
    </div>

    <div class="form-group">
      <label>Date of Birth</label>
      <input type="date" name="dateOfBirth" [(ngModel)]="staff.dateOfBirth" />
    </div>

    <div class="form-group">
      <label>Gender</label>
      <select name="gender" [(ngModel)]="staff.gender">
        <option value="">Select</option>
        <option value="MALE">Male</option>
        <option value="FEMALE">Female</option>
      </select>
    </div>

    <div class="form-group">
      <label>Phone</label>
      <input type="tel" name="phoneNumber" [(ngModel)]="staff.phoneNumber" />
    </div>

    <div class="form-group full-width">
      <label>Address</label>
      <input type="text" name="address" [(ngModel)]="staff.address" />
    </div>

    <div class="form-group">
      <label>National ID</label>
      <input type="text" name="nationalID" [(ngModel)]="staff.nationalID" />
    </div>

    <div class="form-group">
      <label>Nationality</label>
      <select name="nationality" [(ngModel)]="staff.nationality">
        <option value="">Select</option>
        <option *ngFor="let country of countries" [value]="country.code">{{ country.name }}</option>
      </select>
    </div>

    <!-- Specialty -->
    <div class="form-group full-width">
      <label>Specialty *</label>
      <input type="text" name="specialty" [(ngModel)]="staff.specialty" required />
    </div>

    <!-- Categories -->
    <div class="form-group full-width">
      <label>Categories</label>
      <div *ngFor="let cat of categories">
        <input type="checkbox" [value]="cat.id" (change)="toggleCategorySelection(cat.id)">
        {{ cat.name }}
      </div>
    </div>

    <div class="form-actions full-width">
      <button type="submit" [disabled]="isSubmitting">
        <span *ngIf="isSubmitting"><i class="fas fa-spinner fa-spin"></i> Saving...</span>
        <span *ngIf="!isSubmitting">Save Staff</span>
      </button>
    </div>

  </form>
</div>
